<!--- GENERATED BY gomplate from scripts/docs/observer-page.md.tmpl --->

# docker

 Queries the Docker Engine API for running containers.  If
you are using Kubernetes, you should use the [k8s-api
observer](./k8s-api.md) instead of this.

Note that you will need permissions to access the Docker engine API.  For a
Docker domain socket URL, this means that the agent needs to have read
permissions on the socket.  We don't currently support authentication for
HTTP URLs.


Observer Type: `docker`

[Observer Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/observers/docker)

## Configuration

| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `dockerURL` | no | `string` |  (**default:** `unix:///var/run/docker.sock`) |
| `labelsToDimensions` | no | `map of string` | A mapping of container label names to dimension names that will get applied to the metrics of all discovered services. The corresponding label values will become the dimension value for the mapped name.  E.g. `io.kubernetes.container.name: container_spec_name` would result in a dimension called `container_spec_name` that has the value of the `io.kubernetes.container.name` container label. |
| `useHostnameIfPresent` | no | `bool` | If true, the "Config.Hostname" field (if present) of the docker container will be used as the discovered host that is used to configure monitors.  If false or if no hostname is configured, the field `NetworkSettings.IPAddress` is used instead. (**default:** `false`) |




## Endpoint Variables

The following fields are available on endpoints generated by this observer and
can be used in discovery rules.

| Name | Type | Description |
| ---  | ---  | ---         |
| `container_name` | `string` | The first and primary name of the container as it is known to the container runtime (e.g. Docker). |
| `ip_address` | `string` | The IP address of the endpoint if the `host` is in the from of an IPv4 address |
| `network_port` | `string` | An alias for `port` |
| `private_port` | `string` | The port that the service endpoint runs on inside the container |
| `public_port` | `string` | The port exposed outside the container |
| `alternate_port` | `integer` | Used for services that are accessed through some kind of NAT redirection as Docker does.  This could be either the public port or the private one. |
| `container_command` | `string` | The command used when running the container exposing the endpoint |
| `container_id` | `string` | The ID of the container exposing the endpoint |
| `container_image` | `string` | The image name of the container exposing the endpoint |
| `container_labels` | `map of string` | A map that contains container label key/value pairs. You can use the `Contains` and `Get` helper functions in discovery rules to make use of this. See [Endpoint Discovery](../auto-discovery.md#additional-functions). |
| `container_names` | `list of string` | A list of container names of the container exposing the endpoint |
| `container_state` | `string` | The container state, will usually be "running" since otherwise the container wouldn't have a port exposed to be discovered. |
| `discovered_by` | `string` | The observer that discovered this endpoint |
| `host` | `string` | The hostname/IP address of the endpoint |
| `id` | `string` |  |
| `name` | `string` | A observer assigned name of the endpoint |
| `orchestrator` | `integer` |  |
| `port` | `integer` | The TCP/UDP port number of the endpoint |
| `port_labels` | `map of string` | A map of labels on the container port. You can use the `Contains` and `Get` helper functions in discovery rules to make use of this. See [Endpoint Discovery](../auto-discovery.md#additional-functions). |
| `port_type` | `string` | TCP or UDP |

## Dimensions

These dimensions are added to all metrics that are emitted for this service
endpoint.  These variables are also available to use as variables in discovery
rules.

| Name | Description |
| ---  | ---         |
| `container_name` | The primary name of the running container -- Docker containers can have multiple names but this will be the first name, if any. |
| `container_image` | The image name (including tags) of the running container |


