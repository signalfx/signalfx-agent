<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# collectd/couchbase

 Monitors couchbase by using the
[couchbase collectd Python
plugin](https://github.com/signalfx/collectd-couchbase), which collects
metrics from couchbase instances

Sample YAML configuration with custom query:

```yaml
monitors:
- type: collectd/couchbase
  host: 127.0.0.1
  port: 8091
  collectTarget: "NODE"
  clusterName: "my-cluster"
  username: "user"
  password: "password"
```


Monitor Type: `collectd/couchbase`

[Monitor Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/collectd/couchbase)

**Accepts Endpoints**: **Yes**

**Multiple Instances Allowed**: Yes

## Configuration

| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `moduleName` | no | `string` | Corresponds to the ModuleName option in collectd-python |
| `modulePaths` | no | `list of string` | Corresponds to a set of ModulePath options in collectd-python |
| `pluginConfig` | no | `map of any` | This is a yaml form of the collectd config. |
| `typesDBPaths` | no | `list of string` | A set of paths to [types.db files](https://collectd.org/documentation/manpages/types.db.5.shtml) that are needed by your plugin.  If not specified, the runner will use the global collectd types.db file. |
| `host` | **yes** | `string` |  |
| `port` | **yes** | `integer` |  |
| `collectTarget` | **yes** | `string` | Define what this Module block will monitor: "NODE", for a Couchbase node, or "BUCKET" for a Couchbase bucket. |
| `collectBucket` | no | `string` | If CollectTarget is "BUCKET", CollectBucket specifies the name of the bucket that this will monitor. |
| `clusterName` | no | `string` | Name of this Couchbase cluster. (**default**:"default") |
| `collectMode` | no | `string` | Change to "detailed" to collect all available metrics from Couchbase stats API. Defaults to "default", collecting a curated set that works well with SignalFx. See [metric_info.py](https://github.com/signalfx/collectd-couchbase/blob/master/metric_info.py) for more information. |
| `username` | no | `string` | Username to authenticate with |
| `password` | no | `string` | Password to authenticate with |




## Metrics

This monitor emits the following metrics.  Note that configuration options may
cause only a subset of metrics to be emitted.

| Name | Type | Description |
| ---  | ---  | ---         |
| `gauge.bucket.basic.dataUsed` | gauge | Size of user data within buckets of the specified state that are resident in RAM (%) |
| `gauge.bucket.basic.diskFetches` | gauge | Number of disk fetches |
| `gauge.bucket.basic.diskUsed` | gauge | Amount of disk used (bytes) |
| `gauge.bucket.basic.itemCount` | gauge | Number of items associated with the bucket |
| `gauge.bucket.basic.memUsed` | gauge | Amount of memory used by the bucket (bytes) |
| `gauge.bucket.basic.opsPerSec` | gauge | Number of operations per second |
| `gauge.bucket.basic.quotaPercentUsed` | gauge | Percentage of RAM used (for active objects) against the configure bucket size (%) |
| `gauge.bucket.op.cmd_get` | gauge | requested objects |
| `gauge.bucket.op.couch_docs_fragmentation` | gauge | Percent fragmentation of documents in this bucket. |
| `gauge.bucket.op.couch_views_ops` | gauge | view operations per second |
| `gauge.bucket.op.curr_connections` | gauge | open connection per bucket |
| `gauge.bucket.op.curr_items` | gauge | total number of stored items per bucket |
| `gauge.bucket.op.disk_write_queue` | gauge | number of items waiting to be written to disk |
| `gauge.bucket.op.ep_bg_fetched` | gauge | number of items fetched from disk |
| `gauge.bucket.op.ep_cache_miss_rate` | gauge | ratio of requested objects found in cache vs retrieved from disk |
| `gauge.bucket.op.ep_diskqueue_drain` | gauge | items removed from disk queue |
| `gauge.bucket.op.ep_diskqueue_fill` | gauge | enqueued items on disk queue |
| `gauge.bucket.op.ep_mem_high_wat` | gauge | memory high water mark - point at which active objects begin to be ejected from bucket |
| `gauge.bucket.op.ep_mem_low_wat` | gauge | memory low water mark |
| `gauge.bucket.op.ep_num_value_ejects` | gauge | number of objects ejected out of the bucket |
| `gauge.bucket.op.ep_oom_errors` | gauge | request rejected - bucket is at quota, panic |
| `gauge.bucket.op.ep_queue_size` | gauge | number of items queued for storage |
| `gauge.bucket.op.ep_tmp_oom_errors` | gauge | request rejected - couchbase is making room by ejecting objects, try again later |
| `gauge.bucket.op.mem_used` | gauge | memory used |
| `gauge.bucket.op.ops` | gauge | total of gets, sets, increment and decrement |
| `gauge.bucket.op.vb_active_resident_items_ratio` | gauge | ratio of items kept in memory vs stored on disk |
| `gauge.bucket.quota.ram` | gauge | Amount of RAM used by the bucket (bytes). |
| `gauge.bucket.quota.rawRAM` | gauge | Amount of raw RAM used by the bucket (bytes). |
| `gauge.nodes.cmd_get` | gauge | Number of get commands |
| `gauge.nodes.couch_docs_actual_disk_size` | gauge | Amount of disk space used by Couch docs.(bytes) |
| `gauge.nodes.couch_docs_data_size` | gauge | Data size of couch documents associated with a node (bytes) |
| `gauge.nodes.couch_spatial_data_size` | gauge | Size of object data for spatial views (bytes) |
| `gauge.nodes.couch_spatial_disk_size` | gauge | Amount of disk space occupied by spatial views, in bytes. |
| `gauge.nodes.couch_views_actual_disk_size` | gauge | Amount of disk space occupied by Couch views (bytes). |
| `gauge.nodes.couch_views_data_size` | gauge | Size of object data for Couch views (bytes). |
| `gauge.nodes.curr_items` | gauge | Number of current items |
| `gauge.nodes.curr_items_tot` | gauge | Total number of items associated with node |
| `gauge.nodes.ep_bg_fetched` | gauge | Number of disk fetches performed since server was started |
| `gauge.nodes.get_hits` | gauge | Number of get hits |
| `gauge.nodes.mcdMemoryAllocated` | gauge | Amount of memcached memory allocated (bytes). |
| `gauge.nodes.mcdMemoryReserved` | gauge | Amount of memcached memory reserved (bytes). |
| `gauge.nodes.mem_used` | gauge | Memory used by the node (bytes) |
| `gauge.nodes.memoryFree` | gauge | Amount of memory free for the node (bytes). |
| `gauge.nodes.memoryTotal` | gauge | Total memory available to the node (bytes). |
| `gauge.nodes.ops` | gauge | Number of operations performed on Couchbase |
| `gauge.nodes.system.cpu_utilization_rate` | gauge | The CPU utilization rate (%) |
| `gauge.nodes.system.mem_free` | gauge | Free memory available to the node (bytes) |
| `gauge.nodes.system.mem_total` | gauge | Total memory available to the node (bytes) |
| `gauge.nodes.system.swap_total` | gauge | Total swap size allocated (bytes) |
| `gauge.nodes.system.swap_used` | gauge | Amount of swap space used (bytes) |
| `gauge.nodes.vb_replica_curr_items` | gauge | Number of items/documents that are replicas |
| `gauge.storage.hdd.free` | gauge | Free harddrive space in the cluster (bytes) |
| `gauge.storage.hdd.quotaTotal` | gauge | Harddrive quota total for the cluster (bytes) |
| `gauge.storage.hdd.total` | gauge | Total harddrive space available to cluster (bytes) |
| `gauge.storage.hdd.used` | gauge | Harddrive space used by the cluster (bytes) |
| `gauge.storage.hdd.usedByData` | gauge | Harddrive use by the data in the cluster(bytes) |
| `gauge.storage.ram.quotaTotal` | gauge | Ram quota total for the cluster (bytes) |
| `gauge.storage.ram.quotaTotalPerNode` | gauge | Ram quota total per node (bytes) |
| `gauge.storage.ram.quotaUsed` | gauge | Ram quota used by the cluster (bytes) |
| `gauge.storage.ram.quotaUsedPerNode` | gauge | Ram quota used per node (bytes) |
| `gauge.storage.ram.total` | gauge | Total ram available to cluster (bytes) |
| `gauge.storage.ram.used` | gauge | Ram used by the cluster (bytes) |
| `gauge.storage.ram.usedByData` | gauge | Ram used by the data in the cluster (bytes) |



