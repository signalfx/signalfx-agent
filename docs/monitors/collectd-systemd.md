<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# collectd/systemd

This [SignalFx Smart Agent](https://github.com/signalfx/signalfx-agent) monitor collects metrics about the state of
configured systemd services using the [collectd-systemd](https://github.com/signalfx/integrations/tree/master/collectd-systemd)
plugin. A service is in the state that a metric represents if the metric value is 1 and not in the state if the
metric value is 0. The name of the service is assigned to dimension `plugin_instance` of the reported metric.

Below is a sample SignalFx Smart Agent YAML configuration for monitoring the state of `docker` and `ubuntu-fan`
services. See [here](https://github.com/signalfx/signalfx-agent#configuration) for SignalFx Smart Agent
configuration details.
```yaml
monitors:
- type: collectd/systemd
  intervalSeconds: 10
  services:
    - docker
    - ubuntu-fan
```
Only metric `gauge.substate.running` which indicates whether a service is running or not gets reported by default.
The other metrics must be configure explicitly (see below). Also, it is recommended that you include the extra
dimension `metric_source` with a meaningful value in order to facilitate filtering in the SignalFx app.
```
monitors:
- type: collectd/systemd
  intervalSeconds: 10
  services:
    - docker
    - ubuntu-fan
  extraDimensions:
    metric_source: collectd/systemd
```


Monitor Type: `collectd/systemd`

[Monitor Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/collectd/systemd)

**Accepts Endpoints**: **Yes**

**Multiple Instances Allowed**: Yes

## Configuration

| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `services` | **yes** | `list of strings` | Systemd services to report on |




## Metrics

The following table lists the metrics available for this monitor. Metrics that are marked as Included are standard metrics and are monitored by default.

| Name | Type | Included | Description |
| ---  | ---  | ---    | ---         |
| `gauge.active_state.active` | gauge |  | Indicates that the systemd unit/service is active |
| `gauge.active_state.inactive` | gauge |  | Indicates that the systemd unit/service is inactive and the previous run was successful or no previous run has taken place yet |
| `gauge.active_state.activating` | gauge |  | Indicates that the systemd unit/service has previously been inactive but is currently in the process of entering an active state |
| `gauge.active_state.deactivating` | gauge |  | Indicates that the systemd unit/service is currently in the process of deactivation |
| `gauge.active_state.reloading` | gauge |  | Indicates that the systemd unit/service is active and currently reloading its configuration |
| `gauge.active_state.failed` | gauge |  | Indicates that the systemd unit/service is inactive the previous run was not successful |
| `gauge.substate.running` | gauge | âœ” | Indicates that the systemd unit/service is running |
| `gauge.substate.exited` | gauge |  | Indicates that the systemd unit/service exited |
| `gauge.substate.failed` | gauge |  | Indicates that the systemd unit/service failed |
| `gauge.substate.dead` | gauge |  | Indicates that the systemd unit/service died |
| `gauge.load_state.loaded` | gauge |  | Indicates that the systemd unit/service configuration was loaded and parsed successfully |
| `gauge.load_state.not-found` | gauge |  | Indicates that the systemd unit/service configuration was not found |
| `gauge.load_state.error` | gauge |  | Indicates that the systemd unit/service configuration failed to load |
| `gauge.load_state.masked` | gauge |  | Indicates that the systemd unit/service is currently masked out (i.e. symlinked to /dev/null etc) |


To specify custom metrics you want to monitor, add a `metricsToInclude` filter
to the agent configuration, as shown in the code snippet below. The snippet
lists all available custom metrics. You can copy and paste the snippet into
your configuration file, then delete any custom metrics that you do not want
sent.

Note that some of the custom metrics require you to set a flag as well as add
them to the list. Check the monitor configuration file to see if a flag is
required for gathering additional metrics.

```yaml

metricsToInclude:
  - metricNames:
    - gauge.active_state.active
    - gauge.active_state.inactive
    - gauge.active_state.activating
    - gauge.active_state.deactivating
    - gauge.active_state.reloading
    - gauge.active_state.failed
    - gauge.substate.exited
    - gauge.substate.failed
    - gauge.substate.dead
    - gauge.load_state.loaded
    - gauge.load_state.not-found
    - gauge.load_state.error
    - gauge.load_state.masked
    monitorType: collectd/systemd
```




