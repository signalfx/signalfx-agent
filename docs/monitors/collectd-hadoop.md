<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# collectd/hadoop

Collects metrics about a Hadoop cluster using the
[collectd Hadoop Python plugin](https://github.com/signalfx/collectd-hadoop).
Also see
https://github.com/signalfx/integrations/tree/master/collectd-hadoop.

The `collectd/hadoop` monitor will collect metrics from the Resource Manager
REST API for the following:
- Cluster Metrics
- Cluster Scheduler
- Cluster Applications
- Cluster Nodes
- MapReduce Jobs

Sample YAML configuration:

```yaml
monitors:
- type: collectd/hadoop
  host: 127.0.0.1
  port: 8088
```

If a remote JMX port is exposed in the hadoop cluster, then
you may also configure the [collectd/hadoopjmx](https://github.com/signalfx/signalfx-agent/tree/master/docs/monitors/collectd-hadoopjmx.md)
monitor to collect additional metrics about the hadoop cluster.


Monitor Type: `collectd/hadoop`

[Monitor Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/collectd/hadoop)

**Accepts Endpoints**: **Yes**

**Multiple Instances Allowed**: Yes

## Configuration

**For a list of monitor options that are common to all monitors, see [Common
Configuration](../monitor-config.md#common-configuration).**


| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `host` | **yes** | `string` | Resource Manager Hostname |
| `port` | **yes** | `integer` | Resource Manager Port |
| `verbose` | no | `bool` | Log verbose information about the plugin (**default:** `false`) |


## Metrics

The following table lists the metrics available for this monitor.
Metrics that are categorized as
[container/host](https://docs.signalfx.com/en/latest/admin-guide/usage.html#about-custom-bundled-and-high-resolution-metrics)
are marked as _Default_ in the table below.

| Name | Type | [Default](https://docs.signalfx.com/en/latest/admin-guide/usage.html#about-custom-bundled-and-high-resolution-metrics) | [Group](#groups) | Description |
| ---  | ---  | ---    | --- | ---         |
| `counter.hadoop.cluster.metrics.total_mb` | cumulative |  |  |  |
| `counter.hadoop.cluster.metrics.total_nodes` | cumulative |  |  |  |
| `counter.hadoop.cluster.metrics.total_virtual_cores` | cumulative |  |  |  |
| `gauge.hadoop.cluster.metrics.active_nodes` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.allocated_mb` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.allocated_virtual_cores` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.apps_completed` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.apps_failed` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.apps_killed` | gauge |  |  |  |
| `gauge.hadoop.cluster.metrics.apps_pending` | gauge |  |  |  |
| `gauge.hadoop.cluster.metrics.apps_running` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.apps_submitted` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.available_mb` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.available_virtual_cores` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.containers_allocated` | gauge |  |  |  |
| `gauge.hadoop.cluster.metrics.containers_pending` | gauge |  |  |  |
| `gauge.hadoop.cluster.metrics.containers_reserved` | gauge |  |  |  |
| `gauge.hadoop.cluster.metrics.decommissioned_nodes` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.lost_nodes` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.rebooted_nodes` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.reserved_mb` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.reserved_virtual_cores` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.total_mb` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.total_virtual_cores` | gauge | ✔ |  |  |
| `gauge.hadoop.cluster.metrics.unhealthy_nodes` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.elapsedTime` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.failedMapAttempts` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.failedReduceAttempts` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.mapsTotal` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.successfulMapAttempts` | gauge | ✔ |  |  |
| `gauge.hadoop.mapreduce.job.successfulReduceAttempts` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.allocatedMB` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.allocatedVCores` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.clusterUsagePercentage` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.memorySeconds` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.priority` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.progress` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.queueUsagePercentage` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.runningContainers` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.apps.vcoreSeconds` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.nodes.availMemoryMB` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.nodes.availableVirtualCores` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.nodes.numContainers` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.nodes.usedMemoryMB` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.nodes.usedVirtualCores` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.absoluteCapacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.absoluteMaxCapacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.absoluteUsedCapacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.allocatedContainers` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.capacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.maxApplications` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.maxApplicationsPerUser` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.maxCapacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.numActiveApplications` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.numApplications` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.numContainers` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.numPendingApplications` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.pendingContainers` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.reservedContainers` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.usedCapacity` | gauge | ✔ |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.userLimit` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.leaf.queue.userLimitFactor` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.root.queue.capacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.root.queue.maxCapacity` | gauge |  |  |  |
| `gauge.hadoop.resource.manager.scheduler.root.queue.usedCapacity` | gauge |  |  |  |
| `hadoop.cluster.metrics.active_nodes` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.allocated_mb` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.allocated_virtual_cores` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_completed` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_failed` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_killed` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_pending` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_running` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.apps_submitted` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.available_mb` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.available_virtual_cores` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.containers_allocated` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.containers_pending` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.containers_reserved` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.decommissioned_nodes` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.lost_nodes` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.rebooted_nodes` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.reserved_mb` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.reserved_virtual_cores` | gauge |  | cluster |  |
| `hadoop.cluster.metrics.total_mb` | counter |  | cluster |  |
| `hadoop.cluster.metrics.total_nodes` | counter |  | cluster |  |
| `hadoop.cluster.metrics.total_virtual_cores` | counter |  | cluster |  |
| `hadoop.cluster.metrics.unhealthy_nodes` | gauge |  | cluster |  |
| `hadoop.mapreduce.job.elapsedTime` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.failedMapAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.failedReduceAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.killedMapAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.killedReduceAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.mapsCompleted` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.mapsPending` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.mapsRunning` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.mapsTotal` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.newMapAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.newReduceAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.reducesCompleted` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.reducesPending` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.reducesTotal` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.runningMapAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.runningReduceAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.successfulMapAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.mapreduce.job.successfulReduceAttempts` | gauge |  | mapreduce-jobs |  |
| `hadoop.resource.manager.apps.allocatedMB` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.allocatedVCores` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.clusterUsagePercentage` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.memorySeconds` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.numAMContainerPreempted` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.numNonAMContainerPreempted` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.preemptedResourceMB` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.preemptedResourceVCores` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.priority` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.progress` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.queueUsagePercentage` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.runningContainers` | gauge |  | applications |  |
| `hadoop.resource.manager.apps.vcoreSeconds` | gauge |  | applications |  |
| `hadoop.resource.manager.node.nodeCPUUsage` | gauge |  | node-resources |  |
| `hadoop.resource.manager.node.nodePhysicalMemoryMB` | gauge |  | node-resources |  |
| `hadoop.resource.manager.node.nodeVirtualMemoryMB` | gauge |  | node-resources |  |
| `hadoop.resource.manager.nodes.availMemoryMB` | gauge |  | nodes |  |
| `hadoop.resource.manager.nodes.availableVirtualCores` | gauge |  | nodes |  |
| `hadoop.resource.manager.nodes.numContainers` | gauge |  | nodes |  |
| `hadoop.resource.manager.nodes.usedMemoryMB` | gauge |  | nodes |  |
| `hadoop.resource.manager.nodes.usedVirtualCores` | gauge |  | nodes |  |
| `hadoop.resource.manager.scheduler.fifo.availNodeCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.capacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.maxQueueMemoryCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.minQueueMemoryCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.numContainers` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.numNodes` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.totalNodeCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.usedCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.fifo.usedNodeCapacity` | gauge |  | fifo-scheduler |  |
| `hadoop.resource.manager.scheduler.leaf.queue.absoluteCapacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.absoluteMaxCapacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.absoluteUsedCapacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.allocatedContainers` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.capacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.maxActiveApplications` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.maxActiveApplicationsPerUser` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.maxApplications` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.maxApplicationsPerUser` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.maxCapacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.numActiveApplications` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.numApplications` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.numContainers` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.numPendingApplications` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.pendingContainers` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.reservedContainers` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.usedCapacity` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.userLimit` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.leaf.queue.userLimitFactor` | gauge |  | leaf-queue |  |
| `hadoop.resource.manager.scheduler.queue.resource.memory` | gauge |  | resource-objects |  |
| `hadoop.resource.manager.scheduler.queue.resource.vCores` | gauge |  | resource-objects |  |
| `hadoop.resource.manager.scheduler.queue.users.numActiveApplications` | gauge |  | queue-users |  |
| `hadoop.resource.manager.scheduler.queue.users.numPendingApplications` | gauge |  | queue-users |  |
| `hadoop.resource.manager.scheduler.root.queue.capacity` | gauge |  | root-queue |  |
| `hadoop.resource.manager.scheduler.root.queue.maxCapacity` | gauge |  | root-queue |  |
| `hadoop.resource.manager.scheduler.root.queue.usedCapacity` | gauge |  | root-queue |  |



### Non-default metrics (version 4.7.0+)

**The following information applies to the agent version 4.7.0+ that has
`enableBuiltInFiltering: true` set on the top level of the agent config.**

To emit metrics that are not _default_, you can add those metrics in the
generic monitor-level `extraMetrics` config option.  Metrics that are derived
from specific configuration options that do not appear in the above table do
not need to be added to `extraMetrics`.

To see a list of metrics that will be emitted you can run `agent-status
monitors` after configuring this monitor in a running agent instance.


#### Groups
You can enable an entire group of metrics by specifying the `extraGroups` config
option in your monitor config.  The value is a list of group names to enable.

### Legacy non-default metrics (version < 4.7.0)

**The following information only applies to agent version older than 4.7.0. If
you have a newer agent and have set `enableBuiltInFiltering: true` at the top
level of your agent config, see the section above. See upgrade instructions in
[Old-style whitelist filtering](../legacy-filtering.md#old-style-whitelist-filtering).**

If you have a reference to the `whitelist.json` in your agent's top-level
`metricsToExclude` config option, and you want to emit metrics that are not in
that whitelist, then you need to add an item to the top-level
`metricsToInclude` config option to override that whitelist (see [Inclusion
filtering](../legacy-filtering.md#inclusion-filtering).  Or you can just
copy the whitelist.json, modify it, and reference that in `metricsToExclude`.



