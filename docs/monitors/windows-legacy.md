<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# windows-legacy

(Windows Only) This monitor reports metrics for Windows system Performance Counters.
The metric names are intended to match what was originally reported by
the SignalFx [PerfCounterReporter](https://github.com/signalfx/PerfCounterReporter)
The metric types are all gauges as originally reported by the PerfCounterReporter.

## Windows Performance Counters
The underlying source for these metrics are Windows Performance Counters.
Most of the performance counters that we query in this monitor are actually
rates per second and percentages that we report as instantaneous Gauge values
each collection interval.

Sample YAML configuration:

```yaml
monitors:
 - type: windows-legacy
```


Monitor Type: `windows-legacy`

[Monitor Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/windowslegacy)

**Accepts Endpoints**: No

**Multiple Instances Allowed**: **No**

## Configuration

| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `counterRefreshInterval` | no | `int64` | (Windows Only) Number of seconds that wildcards in counter paths should be expanded and how often to refresh counters from configuration. (**default:** `60s`) |
| `printValid` | no | `bool` | (Windows Only) Print out the configurations that match available performance counters.  This used for debugging. (**default:** `false`) |




## Metrics

The following table lists the metrics available for this monitor. Metrics that are marked as Included are standard metrics and are monitored by default.

| Name | Type | Included | Description |
| ---  | ---  | ---    | ---         |
| `logicaldisk.disk_read_bytes_sec` | gauge |  | The number of bytes read from disk per second. |
| `logicaldisk.disk_reads_sec` | gauge | ✔ | The number of read operations per second. |
| `logicaldisk.disk_transfers_sec` | gauge |  | The number of transfers per second. |
| `logicaldisk.disk_write_bytes_sec` | gauge |  | The number of bytes written to disk per second. |
| `logicaldisk.disk_writes_sec` | gauge | ✔ | The number of write operations per second. |
| `logicaldisk.free_megabytes` | gauge | ✔ | The number of available megabytes. |
| `logicaldisk.pct_free_space` | gauge | ✔ | The percentage of free disk space available. |
| `memory.available_mbytes` | gauge | ✔ | Unused physical memory (not page file). |
| `memory.pages_input_sec` | gauge | ✔ | Reads from hard disk per second to resolve hard pages. |
| `network_interface.bytes_received_sec` | gauge | ✔ | Bytes Received/sec is the rate at which bytes are received over each network adapter, including framing characters. |
| `network_interface.bytes_sent_sec` | gauge | ✔ | Bytes Sent/sec is the rate at which bytes are sent over each network adapter, including framing characters. |
| `network_interface.bytes_total_sec` | gauge | ✔ | The number of bytes sent and received over a specific network adapter, including framing characters. |
| `network_interface.current_bandwidth` | gauge |  | Current Bandwidth is an estimate of the current bandwidth of the network interface in bits per second (BPS). |
| `network_interface.packets_outbound_discarded` | gauge |  | The number of outbound packets discarded |
| `network_interface.packets_outbound_errors` | gauge | ✔ | The number of packets sent that encountered an error. |
| `network_interface.packets_received_discarded` | gauge |  | The number of received packets discarded. |
| `network_interface.packets_received_errors` | gauge | ✔ | The number of packets received that encountered an error. |
| `network_interface.packets_received_sec` | gauge |  | Tracking the packets received over time can give you a good indication of the typical use of the system's network. |
| `network_interface.packets_sent_sec` | gauge |  | The number of packets sent per second. |
| `paging_file.pct_usage` | gauge | ✔ | Amount of Page File in use, which indicates the server is substituting disk space for memory. |
| `paging_file.pct_usage_peak` | gauge |  | Highest %Usage metric since the last time the server was restarted. |
| `physicaldisk.avg_disk_sec_read` | gauge |  | The average time, in milliseconds, of each read from disk. |
| `physicaldisk.avg_disk_sec_transfer` | gauge |  | The average time in milliseconds spent transfering data on disk. |
| `physicaldisk.avg_disk_sec_write` | gauge |  | The average time, in milliseconds, of each write to disk. |
| `processor.interrupts_sec` | gauge |  | Rate of processor interrupts per second. |
| `processor.pct_privileged_time` | gauge |  | Percentage of elapsed time the processor spends on privileged tasks. |
| `processor.pct_processor_time` | gauge | ✔ | Percentage of elapsed time the processor spends executing non-idle threads. |
| `processor.pct_user_time` | gauge |  | Percentage of elapsed time the processor spends executing user threads. |
| `system.context_switches_sec` | gauge |  | Number of execution contexts switched in the last second, where >6000 is poor, <3000 is good, and <1500 is excellent. |
| `system.processor_queue_length` | gauge |  | Number of threads waiting for CPU cycles, where < 12 per CPU is good/fair, < 8 is better, < 4 is best |
| `system.system_calls_sec` | gauge |  | The number of system calls being serviced by the CPU per second. |


To specify custom metrics you want to monitor, add a `metricsToInclude` filter
to the agent configuration, as shown in the code snippet below. The snippet
lists all available custom metrics. You can copy and paste the snippet into
your configuration file, then delete any custom metrics that you do not want
sent.

Note that some of the custom metrics require you to set a flag as well as add
them to the list. Check the monitor configuration file to see if a flag is
required for gathering additional metrics.

```yaml

metricsToInclude:
  - metricNames:
    - logicaldisk.disk_read_bytes_sec
    - logicaldisk.disk_transfers_sec
    - logicaldisk.disk_write_bytes_sec
    - network_interface.current_bandwidth
    - network_interface.packets_outbound_discarded
    - network_interface.packets_received_discarded
    - network_interface.packets_received_sec
    - network_interface.packets_sent_sec
    - paging_file.pct_usage_peak
    - physicaldisk.avg_disk_sec_read
    - physicaldisk.avg_disk_sec_transfer
    - physicaldisk.avg_disk_sec_write
    - processor.interrupts_sec
    - processor.pct_privileged_time
    - processor.pct_user_time
    - system.context_switches_sec
    - system.processor_queue_length
    - system.system_calls_sec
    monitorType: windows-legacy
```




