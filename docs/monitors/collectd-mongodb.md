<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# collectd/mongodb

 Monitors an instance of MongoDB using the
[collectd MongoDB Python plugin](https://github.com/signalfx/collectd-mongodb).

Also see https://github.com/signalfx/integrations/tree/master/collectd-mongodb.


Monitor Type: `collectd/mongodb`

[Monitor Source Code](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/collectd/mongodb)

**Accepts Endpoints**: **Yes**

**Multiple Instances Allowed**: Yes

## Configuration

| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `moduleName` | no | `string` | Corresponds to the ModuleName option in collectd-python |
| `modulePaths` | no | `list of string` | Corresponds to a set of ModulePath options in collectd-python |
| `pluginConfig` | no | `map of any` | This is a yaml form of the collectd config. |
| `typesDBPaths` | no | `list of string` | A set of paths to [types.db files](https://collectd.org/documentation/manpages/types.db.5.shtml) that are needed by your plugin.  If not specified, the runner will use the global collectd types.db file. |
| `host` | **yes** | `string` |  |
| `port` | **yes** | `integer` |  |
| `databases` | **yes** | `list of string` |  |
| `username` | no | `string` |  |
| `password` | no | `string` |  |
| `useTLS` | no | `bool` |  (**default:** `false`) |
| `caCerts` | no | `string` |  |
| `tlsClientCert` | no | `string` |  |
| `tlsClientKey` | no | `string` |  |
| `tlsClientKeyPassPhrase` | no | `string` |  |




## Metrics

The following table lists the metrics available for this monitor. Metrics that are not marked as Custom are standard metrics and are monitored by default.

| Name | Type | Custom | Description |
| ---  | ---  | ---    | ---         |
| `counter.backgroundFlushing.flushes` | gauge |  | Number of times the database has been flushed |
| `counter.collection.commandsCount` | counter | X | Number of commands issued for a collection |
| `counter.collection.commandsTime` | counter | X | Time spent in microseconds processing commands issued for a collection |
| `counter.collection.getmoreCount` | counter | X | Number of getMore requests issued for a collection |
| `counter.collection.getmoreTime` | counter | X | Time spent in microseconds processing getMore requests for a collection |
| `counter.collection.index.accesses.ops` | counter | X | Number of times an index has been used (only on Mongo 3.2+) |
| `counter.collection.insertCount` | counter | X | Number of inserts issued for a collection |
| `counter.collection.insertTime` | counter | X | Time spent in microseconds processing insert requests for a collection |
| `counter.collection.queriesCount` | counter | X | Number of queries issued for a collection |
| `counter.collection.queriesTime` | counter | X | Time spent in microseconds processing query requests for a collection |
| `counter.collection.readLockCount` | counter | X | Number of read locks issued for a collection |
| `counter.collection.readLockTime` | counter | X | Time spent in microseconds processing read locks for a collection |
| `counter.collection.removeCount` | counter | X | Number of remove requests issued for a collection |
| `counter.collection.removeTime` | counter | X | Time spent in microseconds processing remove requests for a collection |
| `counter.collection.totalCount` | counter | X | Total number of operations issued for a collection |
| `counter.collection.totalTime` | counter | X | Time spent in microseconds processing all operations for a collection |
| `counter.collection.updateCount` | counter | X | Number of update requests issued for a collection |
| `counter.collection.updateTime` | counter | X | Time spent in microseconds processing update requests for a collection |
| `counter.collection.writeLockCount` | counter | X | Number of write locks issued for a collection |
| `counter.collection.writeLockTime` | counter | X | Time spent in microseconds processing write locks for a collection |
| `counter.extra_info.page_faults` | gauge |  | Mongod page faults |
| `counter.network.bytesIn` | gauge |  | Network bytes received by the database server |
| `counter.network.bytesOut` | gauge |  | Network bytes sent by the database server |
| `counter.network.numRequests` | cumulative |  | Requests received by the server |
| `counter.opcounters.delete` | cumulative |  | Number of deletes per second |
| `counter.opcounters.insert` | cumulative |  | Number of inserts per second |
| `counter.opcounters.query` | cumulative |  | Number of queries per second |
| `counter.opcounters.update` | cumulative |  | Number of updates per second |
| `gauge.backgroundFlushing.average_ms` | gauge |  | Average time (ms) to write data to disk |
| `gauge.backgroundFlushing.last_ms` | gauge |  | Most recent time (ms) spent writing data to disk |
| `gauge.collection.avgObjSize` | gauge | X | Mean object/document size of a collection |
| `gauge.collection.count` | gauge | X | Number of objects/documents in a collection |
| `gauge.collection.indexSize` | gauge | X | Size of a particular index on a collection |
| `gauge.collection.max` | gauge | X | Maximum number of documents in a capped collection |
| `gauge.collection.maxSize` | gauge | X | Maximum disk usage of a capped collection |
| `gauge.collection.size` | gauge | X | Size of a collection in bytes, not including indexes |
| `gauge.collection.storageSize` | gauge | X | Size of the collection on disk in bytes, never decreases. |
| `gauge.collections` | gauge | X | Number of collections |
| `gauge.connections.available` | gauge | X | Number of available incoming connections |
| `gauge.connections.current` | gauge |  | Number of current client connections |
| `gauge.dataSize` | gauge |  | Total size of data, in bytes |
| `gauge.extra_info.heap_usage_bytes` | gauge |  | Heap size used by the mongod process, in bytes |
| `gauge.globalLock.activeClients.readers` | gauge |  | Number of active client connections performing reads |
| `gauge.globalLock.activeClients.total` | gauge | X | Total number of active client connections |
| `gauge.globalLock.activeClients.writers` | gauge |  | Number of active client connections performing writes |
| `gauge.globalLock.currentQueue.readers` | gauge |  | Read operations currently in queue |
| `gauge.globalLock.currentQueue.total` | gauge | X | Total operations currently in queue |
| `gauge.globalLock.currentQueue.writers` | gauge |  | Write operations currently in queue |
| `gauge.indexSize` | gauge |  | Total size of indexes, in bytes |
| `gauge.indexes` | gauge | X | Number of indexes across all collections |
| `gauge.mem.mapped` | gauge |  | Mongodb mapped memory usage, in MB |
| `gauge.mem.resident` | gauge |  | Mongodb resident memory usage, in MB |
| `gauge.mem.virtual` | gauge |  | Mongodb virtual memory usage, in MB |
| `gauge.objects` | gauge |  | Number of documents across all collections |
| `gauge.storageSize` | gauge |  | Total bytes allocated to collections for document storage |
| `gauge.uptime` | counter |  | Uptime of this server in milliseconds |

To specify custom metrics you want to monitor, add a negated `metricsToExclude` to the monitor configuration, as shown in the code snippet below. The snippet lists all available custom metrics. You can copy and paste the snippet into your configuration file, then delete any custom metrics that you do not want to monitor. 
Note that some of the custom metrics require you to set a flag as well as add them to the list. Check the monitor configuration file to see if a flag is required for gathering additional metrics.
```yaml 
metricsToExclude:
  - counter.collection.commandsCount
  - counter.collection.commandsTime
  - counter.collection.getmoreCount
  - counter.collection.getmoreTime
  - counter.collection.index.accesses.ops
  - counter.collection.insertCount
  - counter.collection.insertTime
  - counter.collection.queriesCount
  - counter.collection.queriesTime
  - counter.collection.readLockCount
  - counter.collection.readLockTime
  - counter.collection.removeCount
  - counter.collection.removeTime
  - counter.collection.totalCount
  - counter.collection.totalTime
  - counter.collection.updateCount
  - counter.collection.updateTime
  - counter.collection.writeLockCount
  - counter.collection.writeLockTime
  - gauge.collection.avgObjSize
  - gauge.collection.count
  - gauge.collection.indexSize
  - gauge.collection.max
  - gauge.collection.maxSize
  - gauge.collection.size
  - gauge.collection.storageSize
  - gauge.collections
  - gauge.connections.available
  - gauge.globalLock.activeClients.total
  - gauge.globalLock.currentQueue.total
  - gauge.indexes
  negated: true
```



## Dimensions

The following dimensions may occur on metrics emitted by this monitor.  Some
dimensions may be specific to certain metrics.

| Name | Description |
| ---  | ---         |
| `plugin_instance` | Port number of the MongoDB instance |



