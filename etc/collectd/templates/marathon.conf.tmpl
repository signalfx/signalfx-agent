{{define "marathon"}}
<LoadPlugin "python">
  Globals true
  {{ range $key, $value := .Vars -}}
  {{$key}} {{$value}}
  {{ end -}}
</LoadPlugin>

<Plugin "python">
  ModulePath "{{Globals.PluginRoot}}/marathon-collectd-plugin"
  Import "marathon"
  LogTraces true
  <Module "marathon">
    {{range $instance := .Instances}}
    host  ["{{$instance.Vars.host}}", "{{$instance.Vars.port}}", "{{$instance.Vars.username}}", "{{$instance.Vars.password}}"]
    {{end}}
    verbose False
  </Module>
</Plugin>
{{end}}
